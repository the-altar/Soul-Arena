{"version":3,"sources":["webpack:///./src/views/Missions/index.vue?7245","webpack:///src/views/Missions/index.vue","webpack:///./src/views/Missions/index.vue?195f","webpack:///./src/views/Missions/index.vue","webpack:///./src/views/Missions/index.vue?5b06"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","mission","key","id","on","$event","openGoalsModal","_v","_s","name","completed","tracking","_e","attrs","selectedMission","description","g","selectedMissionGoals","battlesWon","pokemon","unlocked_entity","trackMission","stopTracking","staticRenderFns","data","missions","methods","computed","$store","getters","user","trackedMissions","i","tracked","component"],"mappings":"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","file":"js/chunk-c6e4f918.50a517f9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"missions\"},[_c('div',{staticClass:\"missions-list\"},_vm._l((_vm.missions),function(mission){return _c('div',{key:mission.id,staticClass:\"mission\"},[_c('div',{staticClass:\"mission-info\"},[_c('h1',{staticClass:\"mission-name\",on:{\"click\":function($event){return _vm.openGoalsModal(mission)}}},[_vm._v(\" \"+_vm._s(mission.name)+\" \")]),(!mission.completed && !mission.tracking)?_c('div',{staticClass:\"mission-option\"},[_vm._v(\" Available \")]):(mission.completed)?_c('div',{staticClass:\"mission-completed\"},[_vm._v(\" completed \")]):(mission.tracking)?_c('div',{staticClass:\"mission-tracking\"},[_vm._v(\" tracking \")]):_vm._e()])])}),0),_c('div',{staticClass:\"goal\"},[_c('div',[_c('img',{attrs:{\"src\":(\"/img/game/\" + (this.selectedMission.banner) + \".jpg\")}})]),_c('h1',[_vm._v(_vm._s(this.selectedMission.name))]),_c('p',[_vm._v(_vm._s(this.selectedMission.description))]),_c('div',[_c('li',[_vm._v(\"Goals\")]),_vm._l((this.selectedMission.goals),function(g,key){return _c('li',{key:key},[_vm._v(\" \"+_vm._s(g.description)+\" ( \"),(_vm.selectedMissionGoals[key])?_c('span',[_vm._v(_vm._s(_vm.selectedMissionGoals[key].battlesWon))]):_c('span',[_vm._v(\"0\")]),_vm._v(\" / \"+_vm._s(g.battlesWon)+\" ) \")])})],2),_c('div',[_c('img',{attrs:{\"src\":(\"/img/game/\" + (this.pokemon(this.selectedMission.unlocked_entity).facepic) + \".jpg\")}}),_c('p',[_vm._v(\"character unlocked\")])]),(!_vm.selectedMission.completed && !_vm.selectedMission.tracking)?_c('button',{on:{\"click\":function($event){return _vm.trackMission()}}},[_vm._v(\"Track mission\")]):_vm._e(),(!_vm.selectedMission.completed && _vm.selectedMission.tracking)?_c('button',{on:{\"click\":function($event){return _vm.stopTracking()}}},[_vm._v(\"Stop tracking\")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"missions\">\n    <div class=\"missions-list\">\n      <div class=\"mission\" v-for=\"mission in missions\" :key=\"mission.id\">\n        <div class=\"mission-info\">\n          <h1 class=\"mission-name\" @click=\"openGoalsModal(mission)\">\n            {{ mission.name }}\n          </h1>\n          <div\n            v-if=\"!mission.completed && !mission.tracking\"\n            class=\"mission-option\"\n          >\n            Available\n          </div>\n          <div v-else-if=\"mission.completed\" class=\"mission-completed\">\n            completed\n          </div>\n          <div v-else-if=\"mission.tracking\" class=\"mission-tracking\">\n            tracking\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"goal\">\n      <div>\n        <img :src=\"`/img/game/${this.selectedMission.banner}.jpg`\" />\n      </div>\n      <h1>{{ this.selectedMission.name }}</h1>\n      <p>{{ this.selectedMission.description }}</p>\n\n      <div>\n        <li>Goals</li>\n        <li v-for=\"(g, key) in this.selectedMission.goals\" :key=\"key\">\n          {{ g.description }}\n          (\n          <span v-if=\"selectedMissionGoals[key]\">{{\n            selectedMissionGoals[key].battlesWon\n          }}</span\n          ><span v-else>0</span> / {{ g.battlesWon }} )\n        </li>\n      </div>\n\n      <div>\n        <img\n          :src=\"`/img/game/${\n            this.pokemon(this.selectedMission.unlocked_entity).facepic\n          }.jpg`\"\n        />\n        <p>character unlocked</p>\n      </div>\n\n      <button v-if=\"!selectedMission.completed && !selectedMission.tracking\" @click=\"trackMission()\">Track mission</button>\n      <button v-if=\"!selectedMission.completed && selectedMission.tracking\" @click=\"stopTracking()\">Stop tracking</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      missions: [],\n      selectedMission: {},\n      selectedMissionGoals: [],\n    };\n  },\n  methods: {\n    async openGoalsModal(mission) {\n      this.selectedMissionGoals = [];\n      this.selectedMission = mission;\n      const r = await this.$http.get(\n        `/game/mission/${this.selectedMission.id}`\n      );\n      if (r.data.success && r.data.goals.length > 0)\n        this.selectedMissionGoals = r.data.goals[0].goals;\n    },\n    async trackMission() {\n      const id = this.selectedMission.id\n      const mission = this.selectedMission.goals.map((g) => {\n        g.battlesWon = 0;\n        return g;\n      });\n      console.log(id, mission)\n      try {\n        if (this.trackedMissions >= 3) {\n          alert(\"You can't track more than 3 missions at once!\");\n          return;\n        }\n        await this.$http.post(\"/game/track\", [\n          id,\n          JSON.stringify(mission),\n        ]);\n        \n        this.selectedMission.tracking = true\n        this.$emit(\"close\");\n      } catch (err) {\n        alert(err);\n      }\n    },\n    async stopTracking(){\n      try {\n        const missionId = this.selectedMission.id\n        const r = await this.$http.delete(`/game/mission/${missionId}`)\n        if(r.data.success){\n          this.selectedMission.tracking = false\n          this.selectedMissionGoals = []\n        }\n      }catch(err){\n        alert(err)\n      }\n    }\n  },\n  async created() {\n    const r = await this.$http.get(\"/game/mission\");\n    this.missions = r.data;\n    this.openGoalsModal(this.missions[0]);\n  },\n  computed: {\n    pokemon() {\n      return this.$store.getters[\"Roster/findPokemonById\"];\n    },\n    user() {\n      return this.$store.getters[\"user/getUserData\"];\n    },\n    trackedMissions() {\n      let tracked = 0;\n      for (const i in this.missions) {\n        if (this.missions[i].tracking) tracked++;\n        if (tracked >= 3) return tracked;\n      }\n      return tracked;\n    },\n  },\n};\n</script>\n\n<style lang='scss'>\n.missions {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  color: #fafafa;\n\n  &-heading {\n    background-color: #2b2b2b;\n    height: 50px;\n    line-height: 50px;\n    text-align: center;\n    margin: 5px;\n    border-radius: 20px;\n    font-size: 14px;\n  }\n\n  &-notes {\n    background-color: #2b2b2b;\n    border-radius: 20px;\n    padding: 5px;\n    font-size: 12px;\n    width: 80%;\n    text-align: center;\n  }\n\n  &-list {\n    width: 35%;\n    height: 500px;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n}\n\n.mission {\n  width: 100%;\n  color: #fafafa;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  &-banner {\n    height: 175px;\n    width: 250px;\n    box-sizing: border-box;\n    border: 1px solid #2b2b2b;\n  }\n  &-info {\n    color: #fafafa;\n    width: 100%;\n    margin: 5px;\n    text-align: center;\n    font-size: 12px;\n    background-color: rgba($color: #2b2b2b, $alpha: 0.7);\n  }\n  &-name {\n    font-size: 12px;\n    font-weight: bold;\n    margin: 0;\n    width: 100%;\n    background-color: #2b2b2b;\n  }\n\n  &-option {\n    text-align: center;\n    background-color: #fafafa;\n    margin: 0;\n    color: #2b2b2b;\n  }\n  &-tracking {\n    text-align: center;\n    color: #2b2b2b;\n    background-color: gold;\n  }\n  &-completed {\n    text-align: center;\n    color: #2b2b2b;\n    background-color: turquoise;\n  }\n}\n\n.goal {\n  width: 50%;\n  height: 500px;\n  background-color: rgba($color: #2b2b2b, $alpha: 0.9);\n  margin: 5px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-direction: column;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=672554a4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}