(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59a9fa74"],{"0044":function(e,t,a){e.exports=a.p+"img/interrogation.6ae20566.png"},3399:function(e,t,a){e.exports=a.p+"img/sa.7c2bf824.png"},"5ad4":function(e,t,a){},"5daa":function(e,t,a){"use strict";var r=a("5ad4"),n=a.n(r);n.a},7347:function(e,t){},7393:function(e,t,a){e.exports=a.p+"img/user.3d2c8647.svg"},d9c5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.userData?r("main",{staticClass:"container fade-in-bck",class:{bg:e.isDisabled}},[r("div",{staticClass:"home__panel"},[r("div",{staticClass:"home-roster"},e._l(e.currentTeam.members,(function(t,n){return r("drop",{key:n,staticClass:"home-roster-pic",attrs:{draggable:!1},on:{drop:function(t){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return e.handleDrop.apply(void 0,[n].concat(r))}}},[t.facepic?r("img",{attrs:{src:"/uploads/"+t.facepic+".jpg"},on:{dblclick:function(t){return e.removeCharByIndex(n)}}}):r("img",{attrs:{src:a("0044")}})])})),1),r("button",{staticClass:"home__btn",on:{click:function(t){return e.joinMatchMake("rankedLobby")}}},[e.searchingRankedGame?r("p",[e._v("Searching...")]):r("p",[e._v("Ranked Match")]),r("span",[r("img",{class:{"home__btn-active":e.searchingRankedGame},attrs:{src:a("3399")}})])]),r("button",{staticClass:"home__btn",on:{click:function(t){return e.joinMatchMake("quickLobby")}}},[e.searchingQuickGame?r("p",[e._v("Searching...")]):r("p",[e._v("Quick Match")]),r("span",[r("img",{class:{"home__btn-active":e.searchingQuickGame},attrs:{src:a("3399")}})])]),e.userData.rank.authLevel>=0?r("button",{staticClass:"home__btn",on:{click:function(t){return e.$router.push({name:"assignments"})}}},[r("p",[e._v("Assignments")]),e._m(0)]):e._e(),r("button",{staticClass:"home-profile",on:{click:function(t){return e.openPlayerModal()}}},[r("img",{attrs:{src:a("7393")}})])]),r("router-view",{staticClass:"home__router"})],1):e._e()},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("img",{attrs:{src:a("3399")}})])}],s=(a("96cf"),a("1da1")),i=a("7347"),o=a.n(i),c=(a("d81d"),function(){return this.$store.getters["user/getUserData"]}),u=function(){return this.$store.state.game.currentTeam},m=function(){return this.$store.state.midori.disabled},h=function(){return this.$store.state.game.currentTeam.members.map((function(e){return e.id}))},l=function(){return this.$store.state.game.room},g={userData:c,isDisabled:m,currentTeam:u,currentTeamIds:h,battleRoom:l},d=(a("caad"),a("2532"),function(){this.$store.dispatch("audio/playBlocked"),alert("This isn't working yet, sorry!")}),p=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.gameRoom){e.next=3;break}return this.gameRoom.leave(),e.abrupt("return");case 3:if(this.currentTeam.full){e.next=7;break}return this.$store.dispatch("audio/playBlocked"),alert("You need exactly 3 characters to start a game!"),e.abrupt("return");case 7:if(!(this.searchingGame||this.searchingQuickGame||this.searchingRankedGame)){e.next=10;break}return alert("You're already looking for a game!"),e.abrupt("return");case 10:return this.searchingGame=!0,"rankedLobby"===t?this.searchingRankedGame=!0:this.searchingQuickGame=!0,this.$store.dispatch("audio/playSnap"),e.prev=13,e.next=16,this.$colyseus.joinOrCreate(t,{team:this.currentTeamIds,player:this.$store.getters["user/getUserData"]});case 16:this.gameRoom=e.sent,this.gameRoom.onMessage("seat",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.$colyseus.consumeSeatReservation(t);case 3:r=e.sent,a.$store.commit("game/setRoom",r),sessionStorage.setItem("ingame",!0),localStorage.setItem("battle",JSON.stringify({roomId:r.id,sessionId:r.sessionId})),a.battleRoom.onMessage("game-started",(function(e){a.$store.dispatch("audio/changeIntoBattle"),a.$store.commit("game/setGameState",e),a.$store.commit("game/setLive",!0),a.$router.push({name:"ingame"})})),a.gameRoom.leave(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),this.gameRoom.onLeave(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.gameRoom=null,a.searchingGame=!1,a.searchingRankedGame=!1,a.searchingQuickGame=!1;case 4:case"end":return e.stop()}}),e)})))),e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](13),this.searchingGame=!1,alert(e.t0);case 25:case"end":return e.stop()}}),e,this,[[13,21]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.searchingGame){e.next=2;break}return e.abrupt("return");case 2:this.$store.commit("game/removeCharByIndex",t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){this.searchingGame||t&&(this.userData.unlocked.includes(t.id)||t.isFree||this.userData.rank.authLevel>100)&&this.$store.commit("game/addToTeamAtIndex",{char:t,index:e})},k=function(){this.$store.getters["user/modalStates"].profile=!0},v={joinLobby:d,handleDrop:b,joinMatchMake:p,openPlayerModal:k,removeCharByIndex:f},R={},_={data:function(){return{searchingGame:!1,searchingQuickGame:!1,searchingRankedGame:!1,btn2:!1,theme:{},gameRoom:null}},components:o.a,computed:g,methods:v,watchers:R,created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user");case 2:a=t.sent,e.$store.commit("user/SET_USER",a.data);case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$store.commit("midori/setUpdate",{value:!0,index:2})},beforeDestroy:function(){this.gameRoom&&this.gameRoom.leave()}},y=_,w=(a("5daa"),a("2877")),x=Object(w["a"])(y,r,n,!1,null,null,null);t["default"]=x.exports}}]);
//# sourceMappingURL=chunk-59a9fa74.1d4709f5.js.map