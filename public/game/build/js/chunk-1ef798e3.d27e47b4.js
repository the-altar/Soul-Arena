(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ef798e3"],{"1ec0":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"missions"},[n("div",{staticClass:"missions-list"},t._l(t.missions,(function(s){return n("div",{key:s.id,staticClass:"mission"},[n("div",{staticClass:"mission-info"},[n("div",{staticClass:"mission-name",on:{click:function(e){return t.openGoalsModal(s)}}},[n("h1",[t._v(" "+t._s(s.name)+" ")]),n("span",{class:"mission-track mission-track-"+t.status(s)})]),s.completed?n("div",{staticClass:"mission-completed mission-tag"},[t._v(" completed ")]):t.hasRequiredLevel(s.level_requirement)?s.completed||s.tracking?s.tracking?n("div",{staticClass:"mission-tracking mission-tag"},[t._v(" tracking ")]):t._e():n("div",{staticClass:"mission-available mission-tag"},[t._v(" Available ")]):n("div",{staticClass:"mission-tag mission-unavailable"},[t._v(" Hasn't reached required level yet ")])])])})),0),n("goals",{attrs:{mission:t.selectedMission,goals:t.selectedMissionGoals,tracked:t.tracked}}),n("div",{staticClass:"missions-menu"},[n("button",{on:{click:function(s){return t.$router.push({name:"home"})}}},[n("img",{attrs:{src:e("e0ed")}})])])],1)},i=[],a=(e("96cf"),e("1da1")),r=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"goal"},[n("div",{staticClass:"goal-pic"},[n("img",{attrs:{src:"/uploads/"+t.mission.banner+".jpg"}})]),n("div",{staticClass:"goal-section"},[n("h1",{staticClass:"goal-title"},[t._v(t._s(t.mission.name))]),n("div",{staticClass:"goal-difficulty"},t._l(t.mission.difficulty_level,(function(t){return n("img",{key:t,attrs:{src:e("43a2")}})})),0),n("p",{staticClass:"goal-description"},[t._v(t._s(t.mission.description))]),n("div",{staticClass:"goal-goals"},[t._m(0),t._l(t.mission.goals,(function(s,e){return n("li",{key:e},[t._v(" "+t._s(s.description)+" ( "),t.goals[e]?n("span",[t._v(t._s(t.goals[e].battlesWon))]):n("span",[t._v("0")]),t._v(" / "+t._s(s.battlesWon)+" ) ")])}))],2)]),n("div",{staticClass:"goal-character"},[n("p",[t._v(" character unlocked: "),n("b",[t._v(t._s(t.entity(t.mission.unlocked_entity).name))])]),t.mission.completed||t.mission.tracking||!this.hasRequiredLevel(this.mission.level_requirement)?t._e():n("button",{staticClass:"goal-btn goal-btn--track",on:{click:function(s){return t.trackMission()}}},[t._v(" Track ")]),!t.mission.completed&&t.mission.tracking?n("button",{staticClass:"goal-btn goal-btn--stop",on:{click:function(s){return t.stopTracking()}}},[t._v(" Stop tracking ")]):t._e()])])},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("b",[t._v("Goals")])])}],c=(e("d81d"),{props:["mission","goals","tracked"],computed:{user:function(){return this.$store.getters["user/getUserData"]}},methods:{entity:function(t){var s=this.$store.getters["Roster/getRoster"];for(var e in s)if(s[e].id===t)return s[e];return{}},hasRequiredLevel:function(t){return this.user.season.seasonLevel>=t},trackMission:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.hasRequiredLevel(t.mission.level_requirement)){s.next=2;break}return s.abrupt("return");case 2:if(e=t.mission.id,n=JSON.parse(JSON.stringify(t.mission.goals)).map((function(t){return t.battlesWon=0,t})),s.prev=4,!(t.tracked>=3)){s.next=8;break}return alert("You can't track more than 3 missions at once!"),s.abrupt("return");case 8:return s.next=10,t.$http.post("/track",[e,JSON.stringify(n)]);case 10:t.mission.tracking=!0,s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](4),alert(s.t0);case 16:case"end":return s.stop()}}),s,null,[[4,13]])})))()},stopTracking:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e=t.mission.id,s.next=4,t.$http.delete("/mission/".concat(e));case 4:n=s.sent,n.data.success&&(t.mission.tracking=!1,t.goals=[]),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),alert(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()}}}),l=c,u=(e("b1ba"),e("2877")),m=Object(u["a"])(l,r,o,!1,null,"1342671e",null),d=m.exports,v={components:{goals:d},data:function(){return{missions:[],selectedMission:{},selectedMissionGoals:[]}},methods:{openGoalsModal:function(t){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.selectedMissionGoals=[],s.selectedMission=t,e.next=4,s.$http.get("/mission/".concat(s.selectedMission.id));case 4:n=e.sent,n.data.success&&n.data.goals.length>0&&(s.selectedMissionGoals=n.data.goals[0].goals);case 6:case"end":return e.stop()}}),e)})))()},hasRequiredLevel:function(t){return this.user.season.seasonLevel>=t},statusMethod:function(t){return this.hasRequiredLevel(t.level_requirement)?t.completed||t.tracking?t.completed?"completed":t.tracking?"tracking":"":"available":"unavailable"}},created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$http.get("/mission");case 2:e=s.sent,t.missions=e.data,t.openGoalsModal(t.missions[0]);case 5:case"end":return s.stop()}}),s)})))()},computed:{user:function(){return this.$store.getters["user/getUserData"]},tracked:function(){var t=0;for(var s in this.missions)if(this.missions[s].tracking&&t++,t>=3)return t;return t},status:function(){return this.statusMethod}}},g=v,p=(e("c053"),Object(u["a"])(g,n,i,!1,null,null,null));s["default"]=p.exports},"25cf":function(t,s,e){},"43a2":function(t,s,e){t.exports=e.p+"img/star.61246c06.svg"},"82c4":function(t,s,e){},b1ba:function(t,s,e){"use strict";var n=e("25cf"),i=e.n(n);i.a},c053:function(t,s,e){"use strict";var n=e("82c4"),i=e.n(n);i.a},e0ed:function(t,s,e){t.exports=e.p+"img/goback.592f4b5a.svg"}}]);
//# sourceMappingURL=chunk-1ef798e3.d27e47b4.js.map