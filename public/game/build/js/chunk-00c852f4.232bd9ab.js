(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00c852f4"],{"63d6":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("main",{attrs:{id:"app"}},[e.isDisabled?e._e():a("canvas",{ref:"canvas",staticClass:"canvas"}),a("transition",{attrs:{name:"fade"}},[e.imagesReady&&e.loaded?a("router-view",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded||e.isDisabled,expression:"isLoaded || isDisabled"}]}):a("div",{staticClass:"app-loading"},[a("img",{staticClass:"app-loading-gif",attrs:{src:t("c518")}}),a("div",{staticClass:"app-opt"},[a("p",{staticClass:"app-opt-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.disableMidori,expression:"disableMidori"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.disableMidori)?e._i(e.disableMidori,null)>-1:e.disableMidori},on:{change:function(s){var t=e.disableMidori,a=s.target,r=!!a.checked;if(Array.isArray(t)){var i=null,o=e._i(t,i);a.checked?o<0&&(e.disableMidori=t.concat([i])):o>-1&&(e.disableMidori=t.slice(0,o).concat(t.slice(o+1)))}else e.disableMidori=r}}}),e._v(" Disable animated background ")]),a("p",{staticClass:"app-opt-help"},[e._v(" This feature uses WebGL and might affect performance. Check here to opt-out of it. ")])]),a("p",{staticClass:"app-loading-text"},[e._v(e._s(e.message))])])],1),e.profileModal?a("playerPanel",{on:{close:function(s){e.$store.getters["user/modalStates"].profile=!1}}}):e._e()],1)},r=[],i=(t("96cf"),t("1da1")),o=t("bc3a"),n=t.n(o),c=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"modal fade-in-fwd",on:{click:function(s){return s.target!==s.currentTarget?null:e.$emit("close")}}},[e.user?t("div",{staticClass:"user"},[t("div",{staticClass:"user-header"},[t("img",{attrs:{src:"/img/avatars/"+e.user.avatar}}),t("p",[e._v(" "+e._s(e.user.username)+" "),t("br"),t("span",{staticClass:"user-header-rank"},[e._v(e._s(e.user.season.seasonRank))]),t("br")])]),t("div",[t("div",{staticClass:"user-stats"},[t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.season.wins))]),t("p",{staticClass:"user-stats-label"},[e._v("Wins")])]),t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.season.losses))]),t("p",{staticClass:"user-stats-label"},[e._v("Losses")])]),t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.season.streak))]),t("p",{staticClass:"user-stats-label"},[e._v("Streak")])])]),t("div",{staticClass:"user-stats"},[t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.season.maxStreak))]),t("p",{staticClass:"user-stats-label"},[e._v("max streak")])]),t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.season.seasonLevel))]),t("p",{staticClass:"user-stats-label"},[e._v("Level")])]),t("div",{staticClass:"user-stats-detail"},[t("p",[e._v(e._s(e.user.coins))]),t("p",{staticClass:"user-stats-label"},[e._v("coins")])])])]),t("div",{staticClass:"user-options"},[t("p",{staticClass:"user-header-exp"},[t("span",{staticClass:"user-header-exp-value"},[e._v("exp: "+e._s(e.user.season.exp)+"/"+e._s(e.expNeeded))]),t("span",{staticClass:"user-header-exp-bar",style:{width:e.expRatio+"%"}})])])]):e._e()])},u=[],d={computed:{user:function(){return this.$store.getters["user/getUserData"]},expNeeded:function(){var e=this.user.season.seasonLevel;return e*(e+1)/2*150},expRatio:function(){return Math.floor(this.user.season.exp/this.expNeeded*100)}}},l=d,m=(t("df47"),t("2877")),p=Object(m["a"])(l,c,u,!1,null,"4badc008",null),h=p.exports,v={components:{playerPanel:h},data:function(){return{imagesReady:!1,loaded:!1,disableMidori:!1,message:"Gaming is loading..."}},methods:{reconnectToGame:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var t,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t=localStorage.getItem("battle"),t){s.next=4;break}return setTimeout((function(){e.$store.dispatch("audio/playGameStart"),e.loaded=!0,e.$router.push({name:"home"})}),3e3),s.abrupt("return");case 4:return t=JSON.parse(t),e.message="You're currently in a match; attempting to reconnect!",s.prev=6,s.next=9,e.$colyseus.reconnect(t.roomId,t.sessionId);case 9:a=s.sent,e.$store.commit("game/setRoom",a),setTimeout((function(){e.$store.dispatch("audio/playGameStart"),e.loaded=!0,e.$router.push({name:"home"})}),3e3),e.$router.push({name:"ingame"}),s.next=20;break;case 15:s.prev=15,s.t0=s["catch"](6),localStorage.removeItem("battle"),e.$router.push({name:"home"}),e.loaded=!0;case 20:case"end":return s.stop()}}),s,null,[[6,15]])})))()}},computed:{isLoaded:function(){return this.$store.state.midori.isLoaded},isDisabled:function(){return this.$store.state.midori.disabled},update:function(){return this.$store.state.midori.update},profileModal:function(){return this.$store.getters["user/modalStates"].profile}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var t,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.message="Retrieving user data...",s.next=4,e.$http.get("/user");case 4:return t=s.sent,e.message="Collecting roster...",s.next=8,n.a.get("/character");case 8:return a=s.sent,e.message="Just a few things left...",s.next=12,n.a.get("/game-enums");case 12:r=s.sent,e.$store.commit("user/SET_USER",t.data),e.$store.commit("audio/setAudio"),e.$store.commit("Roster/setData",a.data),e.$store.commit("enums/setEnums",r.data),e.$colyseus.joinOrCreate("lobby",{auth:t.data.auth,id:t.data.id}).then((function(s){e.$store.commit("lobby/SET_ROOM",s)})).catch((function(){e.$store.commit("lobby/SET_ROOM",null)})),e.reconnectToGame(),s.next=24;break;case 21:s.prev=21,s.t0=s["catch"](0),e.$router.push({name:"login"});case 24:case"end":return s.stop()}}),s,null,[[0,21]])})))()},mounted:function(){var e=this;this.$store.dispatch("midori/setCanvas",this.$refs.canvas).then((function(s){e.imagesReady=s}))},watch:{update:function(e){e&&(2===this.$store.state.midori.index?this.$store.commit("midori/setHomeBackground"):this.$store.commit("midori/setTurnBackground")),this.$store.state.midori.update=!1},disableMidori:function(e){e?this.$store.commit("midori/disable"):this.$store.commit("midori/enable")}},beforeDestroy:function(){this.$store.commit("midori/cleanUp")}},f=v,b=Object(m["a"])(f,a,r,!1,null,null,null);s["default"]=b.exports},"90ea":function(e,s,t){},c518:function(e,s,t){e.exports=t.p+"img/wait.cca21584.gif"},df47:function(e,s,t){"use strict";var a=t("90ea"),r=t.n(a);r.a}}]);
//# sourceMappingURL=chunk-00c852f4.232bd9ab.js.map