(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3e503a4"],{"63d6":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{attrs:{id:"app"}},[e.isDisabled?e._e():a("canvas",{ref:"canvas",staticClass:"canvas"}),a("transition",{attrs:{name:"fade"}},[e.imagesReady&&e.loaded?a("router-view",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded||e.isDisabled,expression:"isLoaded || isDisabled"}]}):a("div",{staticClass:"app-loading"},[a("img",{staticClass:"app-loading-gif",attrs:{src:s("c518")}}),a("div",{staticClass:"app-opt"},[a("p",{staticClass:"app-opt-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.disableMidori,expression:"disableMidori"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.disableMidori)?e._i(e.disableMidori,null)>-1:e.disableMidori},on:{change:function(t){var s=e.disableMidori,a=t.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=e._i(s,i);a.checked?n<0&&(e.disableMidori=s.concat([i])):n>-1&&(e.disableMidori=s.slice(0,n).concat(s.slice(n+1)))}else e.disableMidori=r}}}),e._v(" Disable animated background ")]),a("p",{staticClass:"app-opt-help"},[e._v(" This feature uses WebGL and might affect performance. Check here to opt-out of it. ")])]),a("p",{staticClass:"app-loading-text"},[e._v(e._s(e.message))])])],1),e.profileModal?a("playerPanel",{on:{close:function(t){e.$store.getters["user/modalStates"].profile=!1}}}):e._e()],1)},r=[],i=(s("96cf"),s("1da1")),n=s("bc3a"),o=s.n(n),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade-in-fwd",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("close")}}},[e.user?s("div",{staticClass:"user"},[s("div",{staticClass:"user-header"},[s("img",{attrs:{src:"/img/avatars/"+e.user.avatar}}),s("p",[e._v(" "+e._s(e.user.username)+" "),s("br"),s("span",{staticClass:"user-header-rank"},[e._v(e._s(e.user.season.seasonRank))]),s("br")])]),s("div",[s("div",{staticClass:"user-stats"},[s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.season.wins))]),s("p",{staticClass:"user-stats-label"},[e._v("Wins")])]),s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.season.losses))]),s("p",{staticClass:"user-stats-label"},[e._v("Losses")])]),s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.season.streak))]),s("p",{staticClass:"user-stats-label"},[e._v("Streak")])])]),s("div",{staticClass:"user-stats"},[s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.season.maxStreak))]),s("p",{staticClass:"user-stats-label"},[e._v("max streak")])]),s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.season.seasonLevel))]),s("p",{staticClass:"user-stats-label"},[e._v("Level")])]),s("div",{staticClass:"user-stats-detail"},[s("p",[e._v(e._s(e.user.coins))]),s("p",{staticClass:"user-stats-label"},[e._v("coins")])])])]),s("div",{staticClass:"user-options"},[s("p",{staticClass:"user-header-exp"},[s("span",{staticClass:"user-header-exp-value"},[e._v("exp: "+e._s(e.user.season.exp)+"/"+e._s(e.expNeeded))]),s("span",{staticClass:"user-header-exp-bar",style:{width:e.expRatio+"%"}})])])]):e._e()])},d=[],u={computed:{user:function(){return this.$store.getters["user/getUserData"]},expNeeded:function(){var e=this.user.season.seasonLevel;return e*(e+1)/2*150},expRatio:function(){return Math.floor(this.user.season.exp/this.expNeeded*100)}}},l=u,p=(s("df47"),s("2877")),m=Object(p["a"])(l,c,d,!1,null,"4badc008",null),v=m.exports,h={components:{playerPanel:v},data:function(){return{imagesReady:!1,loaded:!1,disableMidori:!1,message:"Gaming is loading..."}},methods:{reconnectToGame:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=localStorage.getItem("battle"),s){t.next=4;break}return setTimeout((function(){e.$store.dispatch("audio/playGameStart"),e.loaded=!0}),3e3),t.abrupt("return");case 4:return s=JSON.parse(s),e.message="You're currently in a match; attempting to reconnect!",t.prev=6,t.next=9,e.$colyseus.reconnect(s.roomId,s.sessionId);case 9:a=t.sent,e.$store.commit("game/setRoom",a),setTimeout((function(){e.$store.dispatch("audio/playGameStart"),e.loaded=!0}),3e3),e.$router.push({name:"ingame"}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](6),localStorage.removeItem("battle");case 18:case"end":return t.stop()}}),t,null,[[6,15]])})))()}},computed:{isLoaded:function(){return this.$store.state.midori.isLoaded},isDisabled:function(){return this.$store.state.midori.disabled},update:function(){return this.$store.state.midori.update},profileModal:function(){return this.$store.getters["user/modalStates"].profile}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("/user");case 3:return s=t.sent,t.next=6,o.a.get("/character");case 6:return a=t.sent,t.next=9,o.a.get("/game-enums");case 9:return r=t.sent,e.$store.commit("user/SET_USER",s.data),e.$store.commit("audio/setAudio"),e.$store.commit("Roster/setData",a.data),e.$store.commit("enums/setEnums",r.data),e.$colyseus.joinOrCreate("lobby",{auth:s.data.auth,id:s.data.id}).then((function(t){e.$store.commit("lobby/SET_ROOM",t)})).catch((function(){e.$store.commit("lobby/SET_ROOM",null)})),t.next=17,e.reconnectToGame();case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),alert(t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()},mounted:function(){var e=this;this.$store.dispatch("midori/setCanvas",this.$refs.canvas).then((function(t){e.imagesReady=t}))},watch:{update:function(e){e&&(2===this.$store.state.midori.index?this.$store.commit("midori/setHomeBackground"):this.$store.commit("midori/setTurnBackground")),this.$store.state.midori.update=!1},disableMidori:function(e){e?this.$store.commit("midori/disable"):this.$store.commit("midori/enable")}},beforeDestroy:function(){this.$store.commit("midori/cleanUp")}},f=h,b=Object(p["a"])(f,a,r,!1,null,null,null);t["default"]=b.exports},"90ea":function(e,t,s){},c518:function(e,t,s){e.exports=s.p+"img/wait.cca21584.gif"},df47:function(e,t,s){"use strict";var a=s("90ea"),r=s.n(a);r.a}}]);
//# sourceMappingURL=chunk-d3e503a4.6153d470.js.map