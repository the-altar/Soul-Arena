(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46b9d7ae"],{"0ccf":function(t,e,n){},5534:function(t,e,n){"use strict";var o=n("0ccf"),s=n.n(o);s.a},"5a14":function(t,e,n){},"69fb":function(t,e,n){},"8f91":function(t,e,n){"use strict";var o=n("5a14"),s=n.n(o);s.a},"971a":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"main"},[t.loaded?n("NewsBody",{attrs:{news:this.thread}}):t._e()],1),t._l(t.$store.getters["GET_COMMENTS"],(function(t,e){return n("Comment",{key:e,attrs:{id:"comment-"+t.id,comment:t,index:e}})})),t.auth.authLevel>=0?n("div",{staticClass:"main"},[n("TextEditor",{attrs:{content:""},on:{"content-captured":t.postComment}})],1):t._e()],2)},s=[],r=(n("99af"),n("5530")),a=(n("96cf"),n("1da1")),c=n("d727"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.content&&!t.content.deleted?n("div",{staticClass:"main comment",attrs:{id:"comment-"+t.content.id}},[n("div",{staticClass:"comment-author"},[n("img",{attrs:{src:"/img/avatars/"+t.content.author.avatar}}),n("p",{staticStyle:{"margin-left":"10px"}},[n("span",{staticClass:"comment-username",class:t.content.author.rank},[t._v(t._s(t.content.author.username))]),n("br"),n("span",{staticClass:"comment-rank"},[t._v(t._s(t.content.author.rank))])]),n("p",{staticClass:"comment-date"},[t._v(" "+t._s(t._f("moment")(new Date(t.content.created_at),"from","now"))+" "),n("br"),t._v(" #"+t._s(t.content.id)+" ")])]),t.content.quotes.length?n("div",{staticClass:"comment-replies"},t._l(t.content.quotes,(function(t){return n("comment-popover",{key:t,attrs:{id:t}})})),1):t._e(),n("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.content.content)}}),t.content.replies.length?n("div",{staticClass:"comment-quotes"},t._l(t.content.replies,(function(t){return n("comment-popover",{key:t,attrs:{id:t}})})),1):t._e(),t.auth.authLevel>=0?n("footer",{staticClass:"comment-options"},[t.comment.author.id===t.userId||t.auth.authLevel>0?n("button",[t._v("edit")]):t._e(),t.auth.authLevel>0?n("button",{on:{click:t.deletePost}},[t._v("delete")]):t._e(),t.isQuoted?n("button",{on:{click:function(e){return t.unquoteComment()}}},[t._v("unquote")]):n("button",{on:{click:function(e){return t.quoteComment()}}},[t._v("quote")])]):t._e()]):n("div",{staticClass:"main comment comment-deleted",attrs:{id:"comment-"+t.content.id}},[t._v(" This post has been deleted ")])},m=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("v-popover",{attrs:{trigger:"hover"}},[n("li",{class:{"comment-list-deleted":t.targetComment.deleted},on:{click:function(e){return t.scrollToPost(t.id)}}},[t._v(" "+t._s(t.id)+"# ")]),n("template",{slot:"popover"},[n("Comment",{attrs:{comment:t.targetComment}})],1)],2)],1)},d=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.comment&&!t.comment.deleted?n("div",{staticClass:"main comment",attrs:{id:"comment-"+t.comment.id}},[n("div",{staticClass:"comment-author"},[n("img",{attrs:{src:"/img/avatars/"+t.comment.author.avatar}}),n("p",{staticStyle:{"margin-left":"10px"}},[n("span",{staticClass:"comment-username",class:t.comment.author.rank},[t._v(t._s(t.comment.author.username))]),n("br"),n("span",{staticClass:"comment-rank"},[t._v(t._s(t.comment.author.rank))])]),n("p",{staticClass:"comment-date"},[t._v(" "+t._s(t._f("moment")(new Date(t.comment.created_at),"from","now"))+" "),n("br"),t._v(" #"+t._s(t.comment.id)+" ")])]),n("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.comment.content)}})]):n("div",{staticClass:"main comment comment-deleted",attrs:{id:"comment-"+t.comment.id}},[t._v(" This post has been deleted! ")])},h=[],p={props:["comment"]},f=p,v=n("2877"),_=Object(v["a"])(f,l,h,!1,null,null,null),C=_.exports,E={components:{Comment:C},props:["id"],computed:{comments:function(){return this.$store.getters["GET_COMMENTS"]},targetComment:function(){if(this.$store.getters["GET_MEMORY"][this.id])return this.$store.getters["GET_MEMORY"][this.id];for(var t in this.comments){var e=this.comments[t];if(e.id==this.id)return this.$store.commit("SET_MEMORY",{key:this.id,data:e}),e}return{}}},methods:{scrollToPost:function(){this.$scrollTo("#comment-".concat(this.id),0,{offset:-60,force:!0,cancelable:!0})}}},g=E,T=(n("8f91"),Object(v["a"])(g,u,d,!1,null,null,null)),b=T.exports,$={components:{CommentPopover:b},props:["comment"],data:function(){return{content:{}}},methods:{quoteComment:function(){this.quoted=!0,this.$store.commit("ADD_QUOTE",{quoteId:this.content.id,body:this.content})},unquoteComment:function(){this.quoted=!0,this.$store.commit("REMOVE_QUOTE",this.content.id)},deletePost:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.delete("/thread/comment/".concat(t.content.id,"/").concat(t.content.author.id));case 3:t.$set(t.content,"deleted",!0),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},computed:{userId:function(){return this.$store.getters["user/id"]},auth:function(){return this.$store.getters["user/permissions"]},isQuoted:function(){return this.$store.getters["IS_QUOTED"](this.content.id)},comments:function(){return this.$store.getters["GET_COMMENTS"]}},created:function(){this.content=this.comment}},O=$,w=(n("5534"),Object(v["a"])(O,i,m,!1,null,null,null)),k=w.exports,x=n("f7d4"),M={Comment:k,NewsBody:c["a"],TextEditor:x["a"]},S=function(){return this.$store.getters["user/permissions"]},q={auth:S},R=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$store.getters["user/permissions"].id,o=this.$store.getters["GET_QUOTES_IDS"],t.prev=2,t.next=5,this.$http.post("/thread/comment",[e,n,this.thread.id,0,o]);case 5:return this.$store.commit("CLEAR_QUOTES"),t.next=8,this.$http.get("/thread/".concat(this.threadId,"/comments/0"));case 8:s=t.sent,this.$store.commit("SET_COMMENTS",s.data),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),alert(t.t0);case 15:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),y=function(t){var e=new Date(t);return new Date(e.valueOf()-6e4*e.getTimezoneOffset())},I={date:y,postComment:R},N={},j={data:function(){return{comments:[],thread:{},loaded:!1,reply:!1,threadId:null}},components:M,computed:q,methods:I,watchers:N,created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,o,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("RESET_COMMENT_SECTION"),n=t.$route.params.id,t.threadId=n,o=0,e.prev=4,e.next=7,t.$http.get("/thread/".concat(n,"/").concat(o));case 7:return s=e.sent,e.next=10,t.$http.get("/thread/".concat(n,"/comments/0"));case 10:a=e.sent,t.thread=Object(r["a"])({},s.data),t.$store.commit("SET_COMMENTS",a.data),t.loaded=!0,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](4),alert(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))()}},D=j,L=(n("b5d9"),Object(v["a"])(D,o,s,!1,null,null,null));e["default"]=L.exports},b5d9:function(t,e,n){"use strict";var o=n("69fb"),s=n.n(o);s.a}}]);
//# sourceMappingURL=chunk-46b9d7ae.4c965359.js.map