(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a957d98"],{"0ccf":function(t,e,n){},5534:function(t,e,n){"use strict";var o=n("0ccf"),s=n.n(o);s.a},"69fb":function(t,e,n){},"971a":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"main"},[t.loaded?n("NewsBody",{attrs:{news:this.thread}}):t._e()],1),t._l(this.comments,(function(t,e){return n("Comment",{key:e,attrs:{id:"comment-"+t.id,comment:t}})})),t.auth.authLevel>=0?n("div",{staticClass:"main"},[n("TextEditor",{attrs:{content:""},on:{"content-captured":t.postComment}})],1):t._e()],2)},s=[],r=(n("99af"),n("5530")),a=(n("96cf"),n("1da1")),c=n("d727"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main",attrs:{id:"comment-"+t.comment.id}},[n("div",{staticClass:"comment-author"},[n("img",{attrs:{src:"/img/avatars/"+t.comment.author.avatar}}),n("p",{staticStyle:{"margin-left":"10px"}},[n("span",{staticClass:"comment-username",class:t.comment.author.rank},[t._v(t._s(t.comment.author.username))]),n("br"),n("span",{staticClass:"comment-rank"},[t._v(t._s(t.comment.author.rank))])]),n("p",{staticClass:"comment-date"},[t._v(" "+t._s(t._f("moment")(new Date(t.comment.created_at),"from","now"))+" "),n("br"),t._v(" #"+t._s(t.comment.id)+" ")])]),t.comment.quotes.length?n("div",{staticClass:"comment-replies"},t._l(t.comment.quotes,(function(e){return n("li",{key:e,on:{click:function(n){return t.scrollToPost(e)}}},[t._v(t._s(e)+"#")])})),0):t._e(),n("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.comment.content)}}),t.comment.replies.length?n("div",{staticClass:"comment-quotes"},t._l(t.comment.replies,(function(e){return n("li",{key:e,on:{click:function(n){return t.scrollToPost(e)}}},[t._v(">>"+t._s(e)+"#")])})),0):t._e(),t.auth.authLevel>=0?n("footer",{staticClass:"comment-options"},[n("button",[t._v("edit")]),n("button",[t._v("delete")]),t.isQuoted?n("button",{on:{click:function(e){return t.unquoteComment()}}},[t._v("unquote")]):n("button",{on:{click:function(e){return t.quoteComment()}}},[t._v("quote")])]):t._e()])},m=[],u={props:["comment"],data:function(){return{}},methods:{quoteComment:function(){this.quoted=!0,this.$store.commit("ADD_QUOTE",{quoteId:this.comment.id,body:this.comment})},unquoteComment:function(){this.quoted=!0,this.$store.commit("REMOVE_QUOTE",this.comment.id)},scrollToPost:function(t){this.$scrollTo("#comment-".concat(t),0,{offset:-60,force:!0,cancelable:!0})}},computed:{auth:function(){return this.$store.getters["user/permissions"]},isQuoted:function(){return this.$store.getters["IS_QUOTED"](this.comment.id)}}},d=u,l=(n("5534"),n("2877")),h=Object(l["a"])(d,i,m,!1,null,null,null),f=h.exports,p=n("f7d4"),v={Comment:f,NewsBody:c["a"],TextEditor:p["a"]},_=function(){return this.$store.getters["user/permissions"]},b={auth:_},w=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$store.getters["user/permissions"].id,o=this.$store.getters["GET_QUOTES_IDS"],t.prev=2,t.next=5,this.$http.post("/thread/comment",[e,n,this.thread.id,0,o]);case 5:return this.$store.commit("CLEAR_QUOTES"),t.next=8,this.$http.get("/thread/".concat(this.threadId,"/comments/0"));case 8:s=t.sent,this.comments=Object(r["a"])({},s.data),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),alert(t.t0);case 15:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),C=function(t){var e=new Date(t);return new Date(e.valueOf()-6e4*e.getTimezoneOffset())},g={date:C,postComment:w},k={},$={data:function(){return{comments:[],thread:{},loaded:!1,reply:!1,threadId:null}},components:v,computed:b,methods:g,watchers:k,created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,o,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,t.threadId=n,o=0,e.prev=3,e.next=6,t.$http.get("/thread/".concat(n,"/").concat(o));case 6:return s=e.sent,e.next=9,t.$http.get("/thread/".concat(n,"/comments/0"));case 9:a=e.sent,t.thread=Object(r["a"])({},s.data),t.comments=Object(r["a"])({},a.data),t.loaded=!0,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))()}},O=$,x=(n("b5d9"),Object(l["a"])(O,o,s,!1,null,null,null));e["default"]=x.exports},b5d9:function(t,e,n){"use strict";var o=n("69fb"),s=n.n(o);s.a}}]);
//# sourceMappingURL=chunk-5a957d98.5f39dfec.js.map